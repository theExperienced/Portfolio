<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>
<body>
    <!-- <div class="progress">
        <div class="progress__bar"></div>
        <div class="progress__overlay"></div>
    </div> -->
        
        <header class="header">
            <input id="header-toggle" type="checkbox" class="header__input">
            <label class="header__toggle" for="header-toggle">
                <span class="header__toggle-stripe header__toggle-stripe--0"></span>
                <span class="header__toggle-stripe header__toggle-stripe--1"></span>
                <span class="header__toggle-stripe header__toggle-stripe--2"></span>
                <span class="header__toggle-stripe header__toggle-stripe--3"></span>
            </label>
            <ul class="header__nav">
                <li class="header__nav-item header__nav-item--myself"><a class="header__nav-link header__nav-link--myself" href="#myself-section">Myself</a></li>
                <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#skills-section">Skills</a></li>
               <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#projects-section">Works</a></li>
                <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#contact-section">Contact</a></li>
            </ul>
        </header>
         <div class="fold">
             <h1 class="fold__name"><span>Daniel</span> <span>Mizrachi</span></h1>
             <h2 class="fold__front-end"><span>Front </span> <span>End </span> <span>Developer</span></h2>
        </div> 
        <main class="main">
            <section id="myself-section" class="section myself-section">
                <h2 class="section-heading section-heading--myself">myself</h2>
                
                <div class="section__container myself-section__container">
                    <p class="myself-section__bio myself-section__bio">
                        Having been introduced to HTML in the early 2000's,
                        I am a self taught front end developer. <br>&emsp;Self expression is my thing, and front end developing is my partner in crime.
                        I love experimenting with shapes, sizes, colors, shadows, varying levels of opacity (and lest we forget fonts) and mixing 
                        them together. Add to the concoction the ability to move stuff around the page and the power of animations, and the result
                        can be sublime. 
                    
                        <br>&emsp;So, "A Blank Canvas" would be an good answer to "What do you get your kick out of?"
                        <br>That and "Rocket League".
    
                    </p>
                </div>
            </section>
            <section id="skills-section" class="section skills-section">
                <h2 class="section-heading section-heading--skills">skills</h2>
                <div class="section__container skills-section__container">
                    <div class="skills-section__skill-box"><img src="img/logos/html.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/css.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/javascript.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/sass.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/react.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="https://raw.githubusercontent.com/reduxjs/redux/master/logo/logo.svg?sanitize=true" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/gsap.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/git.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/github.svg" alt="" class="skills-section__img"></div>
                </div>
            </section>
            <section id="projects-section" class="section projects-section">
                <h2 class="section-heading seaction-heading--projects">Works</h2>
                <div class="section__container projects-section__container">
                    <!-- <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-1.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/PersonalPage/">
                                <p class="projects-section__item-description">My original portfolio.</p>
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-2.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/slidingForm/">
                                <p class="projects-section__item-description">A fully functioning Sign up/ Sign in form, including field validation, featuring a sliding overlay so as to have both services in one container</p>
                            </div>
                        </div>
                    </div> -->
                    <div class="projects-section__item" data-dest="https://theExperienced.github.io/TodoList">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-4.png" alt="">
                            <div class="projects-section__item-overlay">
                                <p class="projects-section__item-description">A React todo list. making use of props and component state</p>
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item" data-dest="https://theexperienced.github.io/movieCatalogue">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-5.png" alt="">
                            <div class="projects-section__item-overlay">
                                <p class="projects-section__item-description">A React movie catalogue. making use of Routers, Redux and ReduxForm</p>
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item" data-dest="https://theexperienced.github.io/MockUpResponsive">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-6.png" alt="">
                            <div class="projects-section__item-overlay">
                                <p class="projects-section__item-description">A fully responsive webpage, maneuvering between Flexbox and Grid</p>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="projects-section__item" data-dest="https://theexperienced.github.io/TriviaQuiz/">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-3.png" alt="">
                            <div class="projects-section__item-overlay">
                                <p class="projects-section__item-description">A trivia game, using fetch API and local storage</p>
                            </div>
                        </div>
                    </div> -->
                </div>
            </section>
            <section id="contact-section" class="section contact-section">
                <h2 class="section-heading contact-section__heading">contact</h2>
    
                <form action="" class="contact-form">
                    <div class="contact-form__group">
                        <label for="name" class="contact-form__label">Name</label>
                        <input type="text" class="contact-form__input contact-form__input--name" name="message" id="message" autocomplete="off" required>
                    </div>
                    <div class="contact-form__group">
                        <label for="email" class="contact-form__label">Email</label>
                        <input type="text" class="contact-form__input contact-form__input--email" name="message" id="message" autocomplete="off" required>                            
                    </div>
                    <div class="contact-form__group contact-form__group--message">
                            <label for="message" class="contact-form__label">Your words</label>
                        <textarea type="text" class="contact-form__input contact-form__input--message" name="message" id="message" required></textarea>
                    </div>
                    <button class="contact-form__submit">submit me</button>
                </form>
            
            </section>

        </main>
        <footer class="footer">
            <p class="footer__copyrights">© 2019  Daniel  Mizrachi</p>
        </footer>
    
    
    <script>

        let vh = (window.innerHeight || document.documentElement.clientHeight);
        let currentlyVisibleSectionIndex = -1;

        let fold = document.querySelector('.fold');
        let header = document.querySelector('header.header');
        let headerNav = document.querySelector('.header__nav');
        let headerInput = document.querySelector('.header__input');
        let headerItems = document.querySelectorAll('.header__nav-item');
        let headerLinks = document.querySelectorAll('.header__nav-link');
        let sections = document.querySelectorAll('.section');
        let messageTextAreaGroup = document.querySelector('.contact-form__group--message');
        let contactFormInputs = document.querySelectorAll('.contact-form__input');
        let skillBoxes = document.querySelectorAll('.skills-section__skill-box');
        let projectItems = document.querySelectorAll('.projects-section__item');
        let projectItemsOverlays = document.querySelectorAll('.projects-section__item-overlay');

        let sectionRects;
        let scrollTop;
        let previousY;
        
        document.addEventListener('DOMContentLoaded', (event) => {
            window.addEventListener('scroll', function() {
                sections.forEach(function(section, index) {
                    let top = section.getBoundingClientRect().top;
                    let bottom = section.getBoundingClientRect().bottom;
                    let height = section.getBoundingClientRect().height;

                    if ((top<=75 && top >= 75-height) && (bottom > 75 && bottom <= 75 + height)) {
                        headerItems[index].classList.add('current-visible-section');
                    }else {
                        headerItems[index].classList.remove('current-visible-section');
                    }
                })
            }); 
        })
        
        if (!!window.IntersectionObserver) {
            let stuckHeaderObserver = new IntersectionObserver(function(entries, observer) {
                if (screen.width > 500) {
                    if (entries[0].isIntersecting) {
                        header.classList.remove('header-stuck');
                        headerNav.classList.remove('header-stuck__nav');
                        headerLinks.forEach(function(headerLink) {
                            headerLink.classList.remove('header-stuck__nav-link');
                        });
                    }else {
                        header.classList.add('header-stuck');
                        headerNav.classList.add('header-stuck__nav');
                        headerLinks.forEach(function(headerLink) {
                            headerLink.classList.add('header-stuck__nav-link');
                        });
                    }
                }
                
            }, {threshold: 0.35});
            stuckHeaderObserver.observe(fold);

            let skillsSectionVisibleObserver = new IntersectionObserver(function(entries, observer) {
                if (entries[0].isIntersecting) {
                    console.log(entries[0].target);
                    skillBoxes.forEach(function(skillBox) {
                        skillBox.classList.add('skill-box-appear');
                    });
                    skillsSectionVisibleObserver.unobserve(entries[0].target);
                }else {
                    return;
                    console.log('sectio not intersecting');
                }
            }, {threshold: 0.4});
            skillsSectionVisibleObserver.observe(sections[1]);
        }

        contactFormInputs.forEach(function(input) {
            input.addEventListener('blur', function() {
                console.log('left input');
                if (!isEmpty(input)) {
                    input.classList.add('input-has-value');
                }else {
                    input.classList.remove('input-has-value');
                }
            });
        });

        projectItems.forEach(function(projectItem, index) {
            projectItem.addEventListener('mouseenter', function(){
                projectItemsOverlays[index].classList.add('project-item-overlay-visible');
            });
            projectItem.addEventListener('mouseleave', function(){
                projectItemsOverlays[index].classList.remove('project-item-overlay-visible');
            });
        });

        headerLinks.forEach(function(headerLink, index) {
            const sectionOriginY = sections[index].getBoundingClientRect().y;
            headerLink.addEventListener('click', function() {
                window.scrollTo({top: sectionOriginY + 75});

                if (screen.width <= 500) {
                    headerInput.checked = false;
                }
            });
        });

        projectItems.forEach(function(projectItem) {
            projectItem.addEventListener('click', function() {
                window.open(this.dataset.dest, "_blank");
            });
        });

        function renderHeaderLinksStuck() {
            headerLinks.forEach(function(headerLink) {
                headerLink.classList.add('stuck-header-link');
            });
        }

        function renderHeaderLinksUnstuck() {
            headerLinks.forEach(function(headerLink) {
                headerLink.classList.remove('stuck-header-link');
            });
        }

        function isEmpty(input) {
            return input.value.trim().length == 0;
        }

    </script>
</body>
</html>
