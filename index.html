<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>
<body>
    <!-- <div class="progress">
        <div class="progress__bar"></div>
        <div class="progress__overlay"></div>
    </div> -->
        
        <div class="splash">
            <div class="splash__container">
                <div class="splash__heading-container">
                    <h1 class="splash__heading">
                        <span class="splash__heading--top"><span class="splash__heading--capital">D</span><span class="splash__heading--uncapital">aniel</span></span>
                        <span class="splash__heading--bottom"><span class="splash__heading--capital">M</span><span class="splash__heading--uncapital">izrachi</span></span>
                    </h1>
                </div>
                <div class="splash__handfan">
                    <div class="splash__blade splash__blade--1">W</div>
                    <div class="splash__blade splash__blade--2">e</div>
                    <div class="splash__blade splash__blade--3">b</div>
                    <div class="splash__blade splash__blade--4">D</div>
                    <div class="splash__blade splash__blade--5">e</div>
                    <div class="splash__blade splash__blade--6">v</div>
                    <div class="splash__blade splash__blade--7">e</div>
                    <div class="splash__blade splash__blade--8">l</div>
                    <div class="splash__blade splash__blade--9">o</div>
                    <div class="splash__blade splash__blade--10">p</div>
                    <div class="splash__blade splash__blade--11">e</div>
                    <div class="splash__blade splash__blade--12">r</div>
                    <!-- <div class="splash__grid-block"></div>
                    <div class="splash__grid-block"></div> -->
                </div>
            </div>
            
            <div class="splash__overlay"></div>
        </div>
        <header class="header">
            <ul class="header__nav">
                <li class="header__nav-item"><a class="header__nav-link header__nav-link--myself" href="#myself-section">Myself</a></li>
                <li class="header__nav-item"><a class="header__nav-link header__nav-link--skills" href="#skills-section">Skills</a></li>
                <li class="header__nav-item"><a class="header__nav-link header__nav-link--ambitions" href="#ambitions-section">Ambitions</a></li>
                <li class="header__nav-item"><a class="header__nav-link header__nav-link--projects" href="#projects-section">Projects</a></li>
                <li class="header__nav-item"><a class="header__nav-link header__nav-link--contact" href="#contact-section">Contact</a></li>
            </ul>
        </header>
        <main class="main">
            <section id="myself-section" class="section myself-section">
                <!-- <div class="myself-section__heading-container"> -->
                    <h2 class="section-heading section-heading--myself">myself</h2>
                <!-- </div> -->
                
                <div class="myself-section__container">
                    <p class="myself-section__bio myself-section__bio--hafira">
                        Having been introduced to HTML amidst the desolate web scenery of the early 2000's,
                        and years later the spark was rekindled,
                        I am virtually a self taught front end web developer. <br>&emsp;As someone who likes expressing
                        himself, using HTML aided by CSS, sprinkled with some JS is one heck of a way for doing just that, once you get the hang of it. 
                        I like experimenting with shapes, colors, shadows, varying levels of opacity (and lest we forget fonts) and mixing 
                        them together. Add to the concoction the ability to move stuff around and the power of animations, the result
                        can turn out to be quite sublime. 
                    
                    <!-- <p class="myself-section__bio myself-section__bio--nutshell"> -->
                        <br>&emsp;So, "A Blank Canvas" would be the answer to "What do you get your kick from?"... that and Rocket League.
                    <!-- </p> -->
                    </p>
                </div>
                        <!-- <div class="myself-section__list-container"></div> -->
                        <!-- <ul class="myself-section__list"> 
                            <li class="myself-section__list-item">Having been introduced to HTML back in the the desolate web scenery of the early 2000's, I am virtually a self taught front end web developer </li>
                            <li class="myself-section__list-item">A fledging front-end developer</li>
                            <li class="myself-section__list-item">All the while dabbling in other languages and technologies</li> 
                            <li class="myself-section__list-item">Harnessing the powers of mindfulness meditation to get inspired </li>
                            <li class="myself-section__list-item">On the lookout for cutting edge, cool CSS features (Nevermind Chrome is the sole supporting browser)</li>
                            <li class="myself-section__list-item">An avid believer in the timeless <blockquote><i><sup>&#10077;</sup> Sharing is Caring <sub>&#10078;</sub></i></blockquote></li>
                        </ul> -->
                    <!-- </div>   -->
                <!-- </div> -->
            </section>
            <section id="skills-section" class="section skills-section">
                    <h2 class="section-heading section-heading--skills">skills</h2>

                <div class="skills-section__container">

                </div>
            </section>
            <section id="ambitions-section" class="section ambitions-section">
                <h2 class="section-heading seaction-heading--ambitions">ambitions</h2>
                <ul class="ambitions-section__list">
                    <li class="ambitions-section__item">Getting to <a class="francine-link" href="http://diana-adrianne.com/purecss-francine/">this</a> level of CSS mastery</li>
                    <li class="ambitions-section__item">Further fine tuning my designer senses</li>
                    <li class="ambitions-section__item">Conquer the SVG realm</li>
                    <li class="ambitions-section__item">Taming my ego</li> 
                    <li class="ambitions-section__item">Learning to fly (in Rocket League)</li>
                </ul>
                <p class="ambitions-section__pre-world-come-together">and maybe even...</p>
                <p class="ambitions-section__world-come-together-word ambitions-section__world-come-together-word--1">making</p>
                <p class="ambitions-section__world-come-together-word ambitions-section__world-come-together-word--2">the world</p>
                <p class="ambitions-section__world-come-together-word ambitions-section__world-come-together-word--3">come</p>
                <p class="ambitions-section__world-come-together-word ambitions-section__world-come-together-word--4">together</p>
            </section>
            <section id="projects-section" class="section projects-section">
                <h2 class="section-heading seaction-heading--ambitions">projects</h2>
            </section>
            <section id="contact-section" class="section contact-section">
                <h2 class="section-heading contact-section__heading">contact</h2>
    
                <form action="" class="contact-form">
                    <div class="contact-form__group">
                        <label for="name" class="contact-form__label">Name</label>
                        <input type="text" class="contact-form__input contact-form__input--name" name="message" id="message" autocomplete="off" required>
                    </div>
                    <div class="contact-form__group">
                        <label for="email" class="contact-form__label">Email</label>
                        <input type="text" class="contact-form__input contact-form__input--email" name="message" id="message" autocomplete="off" required>                            
                    </div>
                    <div class="contact-form__group contact-form__group--message">
                            <label for="message" class="contact-form__label">Your words</label>
                        <textarea type="text" class="contact-form__input contact-form__input--message" name="message" id="message" required></textarea>
                    </div>
                    <button class="contact-form__submit">submit me</button>
                </form>
            
            </section>

        </main>
        <footer class="footer">
            <p class="footer__copyrights">Â© 2019  Daniel  Mizrachi</p>
        </footer>
    
    
    <script>

        let vh = (window.innerHeight || document.documentElement.clientHeight);
        let currentlyVisibleSectionIndex = 0;
        let header = document.querySelector('header.header');
        let headerItems = document.querySelectorAll('.header__nav-item');
        let headerLinks = document.querySelectorAll('.header__nav-link');
        let sections = document.querySelectorAll('.section');
        let messageTextAreaGroup = document.querySelector('.contact-form__group--message');
        let contactFormInputs = document.querySelectorAll('.contact-form__input');
        let preWorldComeTogether = document.querySelector('.ambitions-section__pre-world-come-together');
        let sectionRects;
        let scrollTop;
        

        window.addEventListener('scroll', function(scroll) {
            let yOffset = window.pageYOffset;
            let pageHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
            // console.log(progress);
            // document.getElementsByClassName('progress__overlay')[0].style.left = progress + '%';

            // if (header.getBoundingClientRect().top >= 0 && header.getBoundingClientRect().top < 5) {
            if(scrollTop > 1.1 * vh) {
                header.classList.add('header-stuck');
                renderHeaderLinksStuck();

            }else {
                header.classList.remove('header-stuck');
                renderHeaderLinksUnstuck();
            }

            // sectionRects = Array.from(sections).map(section => section.getBoundingClientRect());
            // sectionRects.forEach(function(sectionRect, index) {
                
            //     console.log("INDEX:" + index + "top:    " + sectionRect.top + "height:   " + sectionRect.height);
            //     if (sectionRect.top <= 0 && sectionRect.top <= sectionRect.height) {
            //         changeCurentlyVisibleSection(index);
            //     }
            // });


            

            // let progressBarOverlay = window.getComputedStyle(document.querySelector('.progress', ':after').setAttribute('background-color', 'red'));
        });

        if (!!window.IntersectionObserver) {
            console.log('INTEROBS supported');
            let messageTextAreaObserver = new IntersectionObserver(function(entries, observer) {
                // console.log(entry);
                if (entries[0].isIntersecting) {
                    console.log(entries[0].target);
                    entries[0].target.classList.add('message-textarea-visible');
                    // observer.unobserve(entries[0].target);
                }else {
                    entries[0].target.classList.remove('message-textarea-visible');
                }
            }, {threshold: 1, rootMargin: "-10%"});
            messageTextAreaObserver.observe(messageTextAreaGroup);
            
            console.log(preWorldComeTogether);
            let preWorldComeTogetherObserver = new IntersectionObserver(function(entries, observer) {
                // console.log(entry);
                if (entries[0].isIntersecting) {
                    // console.log(entry.target);
                    entries[0].target.classList.add('pre=world-come-together-slid');
                    // observer.unobserve(entries[0].target);
                }else {
                    console.log('sectio not intersecting');
                }
            }, {threshold: 0.6,});
            preWorldComeTogetherObserver.observe(preWorldComeTogether);
            
            console.log(preWorldComeTogether);
            let generalSectionObserver = new IntersectionObserver(function(entries, observer) {
                // console.log(entry);
                if (entries[0].isIntersecting) {
                    // console.log(entry.target);
                    entries[0].target.classList.add('section-visible');
                    observer.unobserve(entries[0].target);
                }else {
                    return;
                }
            }, {threshold: 0, rootMargin: "-25%"});
            sections.forEach((section, index) => {
                if (index != 4) {
                    generalSectionObserver.observe(section);
                }
            });
        }

        contactFormInputs.forEach(function(input) {
            input.addEventListener('blur', function() {
                console.log('left input');
                if (!isEmpty(input)) {
                    input.classList.add('input-has-value');
                }else {
                    input.classList.remove('input-has-value');
                }
            });
        });
        // headerLinks.forEach (function(link, index) {
        //     link.addEventListener('click', function(event) {
        //         if (index == currentlyVisibleSectionIndex) {
        //             event.preventDefault();
        //             console.log('click link header prevented');
        //         }else {
        //         }
        //     });
        // });

        function renderHeaderLinksStuck() {
            headerLinks.forEach(function(headerLink) {
                headerLink.classList.add('stuck-header-link');
            });
        }

        function renderHeaderLinksUnstuck() {
            headerLinks.forEach(function(headerLink) {
                headerLink.classList.remove('stuck-header-link');
            });
        }

        function isEmpty(input) {
            return input.value.trim().length == 0;
        }

        // function changeCurentlyVisibleSection(index) {
        //     headerLinks[currentlyVisibleSectionIndex].parentElement.classList.remove('currently-visible-item');
        //     headerLinks[index].parentElement.classList.add('currently-visible-item');
        //     currentlyVisibleSectionIndex = index;
        // }


        // document.querySelectorAll('.section').forEach( function(section) {
        //         window.addEventListener('scroll', function(scroll) {
        //             // console.log('scroll listened');
        //             let sectionTopPosition = window.pageYOffset - section.yOffset;
        //             console.log(section.yOffset);
        //             if (sectionTopPosition >= 0.5 * viewportHeight && sectionTopPosition <= 0.4 * viewportHeight) {
        //                 section.classList.add('visible-section');
        //             }else {
        //                 section.classList.remove('visible-section');
        //             }
        //         });
        //     });

        
            // console.log(section);
        // window.addEventListener('scroll', function() {
        //         console.log('scroll listened');
            
        // });

        // window.onload = function() {

        //     let 
        // }
    
        // let clientRects = Array.from(sections).map(function(section){
        //     return section.getBoundingClientRect();
        // })
        
        // console.log(clientRects);
        // window.onscroll = function() {
            
            // let tops = clientRects.map(function(clientRect) {
            //     return clientRect.top;
            // });
            // console.log(tops);
            // let bottoms = clientRects.map(function(clientRect) {
            //     return clientRect.bottom;
            // });

            // sections.forEach(function(section, index) {

            //     let rect = section.getBoundingClientRect();
          
            //     if ((rect.top < 0.3 * vh && rect.top > 0.5 * vh) ||
            //         (rect.bottom < 0.7 * vh && rect.bottom > 0.5 * vh)) {
            
            //         sections[index].classList.add('visible-section');
            //     }else {
            //         sections[index].classList.remove('visible-section');
            //     }
            // });
        // }
    
    </script>
</body>
</html>