<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>
<body>
    <!-- <div class="progress">
        <div class="progress__bar"></div>
        <div class="progress__overlay"></div>
    </div> -->
        
        <header class="header">
            <input id="header-toggle" type="checkbox" class="header__input">
            <label class="header__toggle" for="header-toggle">
                <span class="header__toggle-stripe header__toggle-stripe--0"></span>
                <span class="header__toggle-stripe header__toggle-stripe--1"></span>
                <span class="header__toggle-stripe header__toggle-stripe--2"></span>
                <span class="header__toggle-stripe header__toggle-stripe--3"></span>
            </label>
            <ul class="header__nav">
                <li class="header__nav-item header__nav-item--myself"><a class="header__nav-link header__nav-link--myself" href="#myself-section">Myself</a></li>
                <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#skills-section">Skills</a></li>
                <!-- <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#goals-section">Goals</a></li> -->
                <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#projects-section">Works</a></li>
                <li class="header__nav-item header__nav-item--not-myself"><a class="header__nav-link header__nav-link--not-myself" href="#contact-section">Contact</a></li>
            </ul>
            <!-- <img src="img/header-secondary.svg" alt="" class="header__secondary-background"> -->
        </header>
         <div class="fold">
             <h1 class="fold__name"><span>Daniel</span> <span>Mizrachi</span></h1>
             <h2 class="fold__front-end"><span>Front </span> <span>End </span> <span>Developer</span></h2>
            <!-- <div class="fold__container">
                <div class="fold__heading-container">
                    <h1 class="fold__heading">
                        <span class="fold__heading--top"><span class="fold__heading--capital">D</span><span class="fold__heading--uncapital">aniel</span></span>
                        <span class="fold__heading--bottom"><span class="fold__heading--capital">M</span><span class="fold__heading--uncapital">izrachi</span></span>
                    </h1>
                </div>
                <div class="fold__handfan">
                    <div class="fold__blade fold__blade--1">W</div>
                    <div class="fold__blade fold__blade--2">e</div>
                    <div class="fold__blade fold__blade--3">b</div>
                    <div class="fold__blade fold__blade--4">D</div>
                    <div class="fold__blade fold__blade--5">e</div>
                    <div class="fold__blade fold__blade--6">v</div>
                    <div class="fold__blade fold__blade--7">e</div>
                    <div class="fold__blade fold__blade--8">l</div>
                    <div class="fold__blade fold__blade--9">o</div>
                    <div class="fold__blade fold__blade--10">p</div>
                    <div class="fold__blade fold__blade--11">e</div>
                    <div class="fold__blade fold__blade--12">r</div>
                     <div class="fold__grid-block"></div>
                    <div class="fold__grid-block"></div> 
                </div>
            </div>
            
            <div class="fold__overlay"></div> -->
        </div> 
        <main class="main">
            <section id="myself-section" class="section myself-section">
                <h2 class="section-heading section-heading--myself">myself</h2>
                
                <div class="section__container myself-section__container">
                    <p class="myself-section__bio myself-section__bio">
                        Having been introduced to HTML midst the desolate web landscape of the early 2000's,
                        <!-- yet too blind to realize the appeal, and fortunate enough to have been reintroduced years later, -->
                        I am virtually a self taught front end developer. <br>&emsp;Self expression courses through my veins, and front end developing is my partner in crime.
                        <!-- Having a tendency to express
                        myself, using HTML aided by CSS, sprinkled with JS is one heck of a way of doing just that, once you get the hang of it.  -->
                        I love experimenting with shapes, sizes, colors, shadows, varying levels of opacity (and lest we forget fonts) and mixing 
                        them together. Add to the concoction the ability to move stuff around the page and the power of animations, and the result
                        can be quite sublime. 
                    
                        <br>&emsp;So, "A Blank Canvas" would be an good answer to "What do you get your kick out of?"
                        <br>That and "Rocket League".
    
                    </p>
                </div>
                        <!-- <div class="myself-section__list-container"></div> -->
                        <!-- <ul class="myself-section__list"> 
                            <li class="myself-section__list-item">Having been introduced to HTML back in the the desolate web scenery of the early 2000's, I am virtually a self taught front end web developer </li>
                            <li class="myself-section__list-item">A fledging front-end developer</li>
                            <li class="myself-section__list-item">All the while dabbling in other languages and technologies</li> 
                            <li class="myself-section__list-item">Harnessing the powers of mindfulness meditation to get inspired </li>
                            <li class="myself-section__list-item">On the lookout for cutting edge, cool CSS features (Nevermind Chrome is the sole supporting browser)</li>
                            <li class="myself-section__list-item">An avid believer in the timeless <blockquote><i><sup>&#10077;</sup> Sharing is Caring <sub>&#10078;</sub></i></blockquote></li>
                        </ul> -->
                    <!-- </div>   -->
                <!-- </div> -->
            </section>
            <section id="skills-section" class="section skills-section">
                <h2 class="section-heading section-heading--skills">skills</h2>
                <div class="section__container skills-section__container">
                    <div class="skills-section__skill-box"><img src="img/logos/html.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/css.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/javascript.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/sass.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/react.svg" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="https://raw.githubusercontent.com/reduxjs/redux/master/logo/logo.svg?sanitize=true" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1u%0D%0AcyMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIiB4bWxu%0D%0AczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1%0D%0Acmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA1MTggMjAyIj4KIDxwb2x5Z29u%0D%0AIHBvaW50cz0iMCAwIDAgMTczIDE0NCAxNzMgMTQ0IDIwMiAyNTkgMjAyIDI1OSAxNzMgNTE4IDE3%0D%0AMyA1MTggMCIgZmlsbD0iI0NCMzgzNyIvPgogPGcgZmlsbD0iI2ZmZiI+CiAgPHBvbHlnb24gcG9p%0D%0AbnRzPSI4NiAyOSAyOSAyOSAyOSA1OCAyOSAxNDQgODYgMTQ0IDg2IDU4IDExNSA1OCAxMTUgMTQ0%0D%0AIDE0NCAxNDQgMTQ0IDU4IDE0NCAyOSIvPgogIDxwYXRoIGQ9Im0xNzMgMjl2MTQ0aDU4di0yOWg1%0D%0AN3YtMTE1aC0xMTV6bTg2IDg2aC0yOHYtNTdoMjh2NTd6Ii8+CiAgPHBvbHlnb24gcG9pbnRzPSIz%0D%0ANzQgMjkgMzE3IDI5IDMxNyA1OCAzMTcgMTQ0IDM3NCAxNDQgMzc0IDU4IDQwMyA1OCA0MDMgMTQ0%0D%0AIDQzMiAxNDQgNDMyIDU4IDQ2MSA1OCA0NjEgMTQ0IDQ5MCAxNDQgNDkwIDU4IDQ5MCAzMSA0OTAg%0D%0AMjkiLz4KIDwvZz4KPC9zdmc+Cg==" alt="" class="skills-section__img"></div>
                    <div class="skills-section__skill-box"><img src="img/logos/git.svg" alt="" class="skills-section__img"></div>
                </div>
            </section>
            <!-- <section id="goals-section" class="section goals-section">
                <h2 class="section-heading section-heading--goals">goals</h2>
                <ul class="goals-section__list">
                    <li class="goals-section__item">Getting to <a class="francine-link" href="http://diana-adrianne.com/purecss-francine/">this</a> level of CSS mastery</li>
                    <li class="goals-section__item">Further fine tuning my designer senses</li>
                    <li class="goals-section__item">Having Adobe Illustrator as my ally</li>
                    <li class="goals-section__item">Conquering the SVG realm</li>
                    <li class="goals-section__item">Taming my ego</li> 
                    <li class="goals-section__item">Learning to fly (in Rocket League)</li>
                </ul>

                .



                <div class="goals-section__pre-world-come-together-container">
                    <p class="goals-section__pre-world-come-together">and maybe even...</p>
                </div>
                <p class="goals-section__world-come-together-word goals-section__world-come-together-word--1">making</p>
                <p class="goals-section__world-come-together-word goals-section__world-come-together-word--2">the world</p>
                <p class="goals-section__world-come-together-word goals-section__world-come-together-word--3">a better</p>
                <p class="goals-section__world-come-together-word goals-section__world-come-together-word--4">place</p>
            </section> -->
            <section id="projects-section" class="section projects-section">
                <h2 class="section-heading seaction-heading--projects">Works</h2>
                <div class="section__container projects-section__container">
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-1.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/PersonalPage/">
                                <p class="projects-section__item-description">My original portfolio.</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-2.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/slidingForm/">
                                <p class="projects-section__item-description">A fully functioning Sign up/ Sign in form, including field validation, featuring a sliding overlay so as to have both services in one container</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-3.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/TriviaQuiz/">
                                <p class="projects-section__item-description">A trivia game, using fetch API and local storage</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-4.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theExperienced.github.io/TodoList">
                                <p class="projects-section__item-description">A React todo list. making use of props and component state</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-5.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/movieCatalogue">
                                <p class="projects-section__item-description">A React movie catalogue. making use of Routers, Redux and ReduxForm</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="img/projectImgs/project-6.png" alt="">
                            <div class="projects-section__item-overlay" data-dest="https://theexperienced.github.io/MockUpResponsive">
                                <p class="projects-section__item-description">A fully responsive webpage, maneuvering between Flexbox and Grid</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="https://picsum.photos/300/300?grayscale" alt="">
                            <div class="projects-section__item-overlay" data-dest="">
                                <p class="projects-section__item-description">A placeholder, not for long</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="projects-section__item">
                        <div class="projects-section__img-container">
                            <img class="projects-section__img" src="https://picsum.photos/300/300?grayscale" alt="">
                            <div class="projects-section__item-overlay" data-dest="">
                                <p class="projects-section__item-description">A placeholder, not for long</p>
                                <!-- <span class="projects-section__item-go">Go</span> -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section id="contact-section" class="section contact-section">
                <h2 class="section-heading contact-section__heading">contact</h2>
    
                <form action="" class="contact-form">
                    <div class="contact-form__group">
                        <label for="name" class="contact-form__label">Name</label>
                        <input type="text" class="contact-form__input contact-form__input--name" name="message" id="message" autocomplete="off" required>
                    </div>
                    <div class="contact-form__group">
                        <label for="email" class="contact-form__label">Email</label>
                        <input type="text" class="contact-form__input contact-form__input--email" name="message" id="message" autocomplete="off" required>                            
                    </div>
                    <div class="contact-form__group contact-form__group--message">
                            <label for="message" class="contact-form__label">Your words</label>
                        <textarea type="text" class="contact-form__input contact-form__input--message" name="message" id="message" required></textarea>
                    </div>
                    <button class="contact-form__submit">submit me</button>
                </form>
            
            </section>

        </main>
        <footer class="footer">
            <p class="footer__copyrights">© 2019  Daniel  Mizrachi</p>
        </footer>
    
    
    <script>

        let vh = (window.innerHeight || document.documentElement.clientHeight);
        let currentlyVisibleSectionIndex = -1;

        let fold = document.querySelector('.fold');
        let header = document.querySelector('header.header');
        let headerNav = document.querySelector('.header__nav');
        let headerInput = document.querySelector('.header__input');
        let headerItems = document.querySelectorAll('.header__nav-item');
        let headerLinks = document.querySelectorAll('.header__nav-link');
        let sections = document.querySelectorAll('.section');
        let messageTextAreaGroup = document.querySelector('.contact-form__group--message');
        let contactFormInputs = document.querySelectorAll('.contact-form__input');
        let skillBoxes = document.querySelectorAll('.skills-section__skill-box');
        // let preWorldComeTogetherContainer = document.querySelector('.goals-section__pre-world-come-together-container');
        // let preWorldComeTogether = document.querySelector('.goals-section__pre-world-come-together');
        let projectItems = document.querySelectorAll('.projects-section__item');
        let projectItemsOverlays = document.querySelectorAll('.projects-section__item-overlay');

        let sectionRects;
        let scrollTop;
        let previousY;
        
        document.addEventListener('DOMContentLoaded', (event) => {
            window.addEventListener('scroll', function() {
                sections.forEach(function(section, index) {
                    let top = section.getBoundingClientRect().top;
                    let bottom = section.getBoundingClientRect().bottom;
                    let height = section.getBoundingClientRect().height;

                    if ((top<=75 && top >= 75-height) && (bottom > 75 && bottom <= 75 + height)) {
                        headerItems[index].classList.add('current-visible-section');
                    }else {
                        headerItems[index].classList.remove('current-visible-section');
                    }
                })
            }); 
        })
        
        if (!!window.IntersectionObserver) {
            // console.log('INTEROBS supported');
            // let messageTextAreaObserver = new IntersectionObserver(function(entries, observer) {
            //     // console.log(entry);
            //     if (entries[0].isIntersecting) {
            //         console.log(entries[0].target);
            //         entries[0].target.classList.add('message-textarea-visible');
            //         // observer.unobserve(entries[0].target);
            //     }else {
            //         entries[0].target.classList.remove('message-textarea-visible');
            //     }
            // }, {threshold: 1, rootMargin: "-10%"});
            // messageTextAreaObserver.observe(messageTextAreaGroup);
            
            // console.log(preWorldComeTogether);
            let stuckHeaderObserver = new IntersectionObserver(function(entries, observer) {
                // console.log(entries[0]);
                if (screen.width > 500) {
                    if (entries[0].isIntersecting) {
                        // console.log(entry.target);
                        header.classList.remove('header-stuck');
                        headerNav.classList.remove('header-stuck__nav');
                        headerLinks.forEach(function(headerLink) {
                            headerLink.classList.remove('header-stuck__nav-link');
                        });
                        // header.classList.add('header-unstuck');
                        // observer.unobserve(entries[0].target);
                    }else {
                        header.classList.add('header-stuck');
                        headerNav.classList.add('header-stuck__nav');
                        headerLinks.forEach(function(headerLink) {
                            headerLink.classList.add('header-stuck__nav-link');
                        });
                    }
                }
                
            }, {threshold: 0.35});
            stuckHeaderObserver.observe(fold);

            // let preWorldComeTogetherContainerObserver = new IntersectionObserver(function(entries, observer) {
            //     // console.log(entries[0]);
            //     if (entries[0].isIntersecting) {
            //         // console.log(entry.target);
            //         preWorldComeTogether.classList.add('pre-world-come-together-slid');
            //         observer.unobserve(entries[0].target);
            //     }else {
            //         return;
            //         // console.log('sectio not intersecting');
            //     }
            // }, {threshold: 1});
            // preWorldComeTogetherContainerObserver.observe(preWorldComeTogetherContainer);

            let skillsSectionVisibleObserver = new IntersectionObserver(function(entries, observer) {
                if (entries[0].isIntersecting) {
                    console.log(entries[0].target);
                    skillBoxes.forEach(function(skillBox) {
                        skillBox.classList.add('skill-box-appear');
                    });
                    skillsSectionVisibleObserver.unobserve(entries[0].target);
                }else {
                    return;
                    console.log('sectio not intersecting');
                }
            }, {threshold: 0.4});
            skillsSectionVisibleObserver.observe(sections[1]);

            // let currentVisibleSectionObserver = new IntersectionObserver(function(entries, observer) {
            //     const currentY = entries[0].boundingClientRect.y;
            //     if (entries[0].isIntersecting && previousY > currentY) {//&& entries[0].boundingClientRect.bottom> 100) {
            //         console.log(entries[0], 'is current');
            //         headerItems[currentVisibleSectionObserver].classList.remove('current-visible-section');
            //         headerItems[currentVisibleSectionObserver-1].classList.add('current-visible-section');
            //         // entries[0].target.classList.add('pre-world-come-together-slid');
            //         // observer.unobserve(entries[0].target);
            //     }else if (!entries[0].isIntersecting && previousY  currentY) {
            //         // console.log('sectio not intersecting');
            //     }
            // }, {threshold: 0, rootMargin: "-50px"});
            // sections.forEach(function(section) {
            //     currentVisibleSectionObserver.observe(section);
            // })

            // let generalSectionObserver = new IntersectionObserver(function(entries, observer) {
            //     // console.log(entry);
            //     if (entries[0].isIntersecting) {
            //         // console.log(entry.target);
            //         entries[0].target.classList.add('section-visible');
            //         observer.unobserve(entries[0].target);
            //     }else {
            //         return;
            //     }
            // }, {threshold: 0, rootMargin: "-25%"});
            // sections.forEach((section, index) => {
            //     if (index != 4) {
            //         generalSectionObserver.observe(section);
            //     }
            // });
        }

        contactFormInputs.forEach(function(input) {
            input.addEventListener('blur', function() {
                console.log('left input');
                if (!isEmpty(input)) {
                    input.classList.add('input-has-value');
                }else {
                    input.classList.remove('input-has-value');
                }
            });
        });

        projectItems.forEach(function(projectItem, index) {
            projectItem.addEventListener('mouseenter', function(){
                projectItemsOverlays[index].classList.add('project-item-overlay-visible');
            });
            projectItem.addEventListener('mouseleave', function(){
                projectItemsOverlays[index].classList.remove('project-item-overlay-visible');
            });
        });

        headerLinks.forEach(function(headerLink, index) {
            const sectionOriginY = sections[index].getBoundingClientRect().y;
            headerLink.addEventListener('click', function() {
                window.scrollTo({top: sectionOriginY + 75});

                if (screen.width <= 500) {
                    headerInput.checked = false;
                }
            });
        });

        projectItemsOverlays.forEach(function(projectItemOverlay) {
            projectItemOverlay.addEventListener('click', function() {
                window.open(this.dataset.dest, "_blank");
            });
        });
        // headerLinks.forEach (function(link, index) {
        //     link.addEventListener('click', function(event) {
        //         if (index == currentlyVisibleSectionIndex) {
        //             event.preventDefault();
        //             console.log('click link header prevented');
        //         }else {
        //         }
        //     });
        // });

        function renderHeaderLinksStuck() {
            headerLinks.forEach(function(headerLink) {
                headerLink.classList.add('stuck-header-link');
            });
        }

        function renderHeaderLinksUnstuck() {
            headerLinks.forEach(function(headerLink) {
                headerLink.classList.remove('stuck-header-link');
            });
        }

        function isEmpty(input) {
            return input.value.trim().length == 0;
        }

        // function changeCurentlyVisibleSection(index) {
        //     headerLinks[currentlyVisibleSectionIndex].parentElement.classList.remove('currently-visible-item');
        //     headerLinks[index].parentElement.classList.add('currently-visible-item');
        //     currentlyVisibleSectionIndex = index;
        // }


        // document.querySelectorAll('.section').forEach( function(section) {
        //         window.addEventListener('scroll', function(scroll) {
        //             // console.log('scroll listened');
        //             let sectionTopPosition = window.pageYOffset - section.yOffset;
        //             console.log(section.yOffset);
        //             if (sectionTopPosition >= 0.5 * viewportHeight && sectionTopPosition <= 0.4 * viewportHeight) {
        //                 section.classList.add('visible-section');
        //             }else {
        //                 section.classList.remove('visible-section');
        //             }
        //         });
        //     });

        
            // console.log(section);
        // window.addEventListener('scroll', function() {
        //         console.log('scroll listened');
            
        // });

        // window.onload = function() {

        //     let 
        // }
    
        // let clientRects = Array.from(sections).map(function(section){
        //     return section.getBoundingClientRect();
        // })
        
        // console.log(clientRects);
        // window.onscroll = function() {
            
            // let tops = clientRects.map(function(clientRect) {
            //     return clientRect.top;
            // });
            // console.log(tops);
            // let bottoms = clientRects.map(function(clientRect) {
            //     return clientRect.bottom;
            // });

            // sections.forEach(function(section, index) {

            //     let rect = section.getBoundingClientRect();
          
            //     if ((rect.top < 0.3 * vh && rect.top > 0.5 * vh) ||
            //         (rect.bottom < 0.7 * vh && rect.bottom > 0.5 * vh)) {
            
            //         sections[index].classList.add('visible-section');
            //     }else {
            //         sections[index].classList.remove('visible-section');
            //     }
            // });
        // }
    
    </script>
</body>
</html>
